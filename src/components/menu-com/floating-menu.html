<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<div *ngIf="isSeller" class="fab-wrapper">
  <!-- Nút chính -->
  <button class="fab-main" (click)="toggleMenu()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Các nút chức năng -->
  <ng-container *ngFor="let action of actions; let i = index">
    <button
      class="fab-action"
      [ngStyle]="getButtonStyle(i)"
      [class.open]="isOpen"
      (click)="action.onClick()"
      [title]="action.label"
    >
      <i [class]="action.icon"></i>
    </button>
  </ng-container>
</div>

<!-- Modal backdrop -->
<div class="modal-backdrop" *ngIf="showEditModal" (click)="closeEditModal()"></div>

<!-- Modal -->
<div class="modal" *ngIf="showEditModal">
  <h3>Chọn sản phẩm để chỉnh sửa</h3>

  <!-- Loading state -->
  <div *ngIf="loadingProducts">Đang tải sản phẩm...</div>

  <!-- Danh sách sản phẩm -->
  <ul *ngIf="!loadingProducts && myProducts.length > 0">
    <li *ngFor="let p of myProducts">
      <i class="fas fa-box"></i> {{ p.productName }} - {{ p.price | currency:'VND' }}
      <button (click)="selectProductForEdit(p)">Chỉnh sửa</button>
    </li>
  </ul>

  <!-- Không có sản phẩm -->
  <div *ngIf="!loadingProducts && myProducts.length === 0">
    Bạn chưa có sản phẩm nào.
  </div>

  <button (click)="closeEditModal()">Đóng</button>
</div>

<!-- Form popup (tạo + chỉnh sửa) -->
<app-product-form
  *ngIf="showProductModal"
  [productData]="selectedProduct"
  (productChange)="onProductChange($event)"
  (close)="closeProductModal()">
</app-product-form>
